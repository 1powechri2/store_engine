<h1>All Orders</h1>

<div id="status_count" class="">
  <table class="table table-condensed">
    <thead>
      <tr>
        <th><h3>Total Orders</h3></th>
        <th><h4>Pending</h4></th>
        <th><h4>Cancelled</h4></th>
        <th><h4>Paid</h4></th>
        <th><h4>Shipped</h4></th>
        <th><h4>Returned</h4></th>
      </tr>
    </thead>
    <tr>
      <td><%= Order.count %></td>
      <td><%= Order.find_all_by_status("pending").count %></td>
      <td><%= Order.find_all_by_status("cancelled").count %></td>
      <td><%= Order.find_all_by_status("paid").count %></td>
      <td><%= Order.find_all_by_status("shipped").count %></td>
      <td><%= Order.find_all_by_status("returned").count %></td>
    </tr>
  </table>
</div>

<div id="status_sort">
  <!-- Selector for status sorting goes here! -->
</div>

<div>
  <table id="orders" class="table table-striped table-bordered">
    <thead>
      <tr>
        <th><%= link_to "Order ID", :sort => :id %></th>
        <th>Customer Name</th>
        <th>Customer ID</th>
        <th><%= link_to "Created At",   :sort => :created_at  %></th>
        <th><%= link_to "Updated At",   :sort => :updated_at  %></th>
        <th><%= link_to "Order Total",  :sort => :total_price %></th>
        <th><%= link_to "Order Status", :sort => :status      %></th>
      </tr>
    </thead>
    <% @orders.each do |order| %>
      <tr id="order_<%= order.id %>">
        <td id="order_<%=order.id%>_add"><%= link_to order.id, order_path(order) %></td>
        <td><%= order.user.name %></td>
        <td><%= link_to order.user.id, user_path(order.user) %></td>
        <td><%= order.created_at %></td>
        <td><%= order.updated_at %></td>
        <td><%= order.total_price %></td>
        <td><%= order.status %></td>
      </tr>
    <% end %>
  </table>

  <h2>Pending Orders</h2>
  <%= render :partial => "sorted_orders", :locals => { :param => "pending" } %>

  <h2>Cancelled Orders</h2>
  <%= render :partial => "sorted_orders", :locals => { :param => "cancelled" } %>

  <h2>Paid Orders</h2>
  <%= render :partial => "sorted_orders", :locals => { :param => "paid" } %>

  <h2>Shipped Orders</h2>
  <%= render :partial => "sorted_orders", :locals => { :param => "shipped" } %>

  <h2>Returned Orders</h2>
  <%= render :partial => "sorted_orders", :locals => { :param => "returned" } %>
</div>